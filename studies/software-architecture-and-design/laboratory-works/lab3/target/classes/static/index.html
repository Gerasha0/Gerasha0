<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ —ó–∂—ñ - API Interface</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .content {
            padding: 40px;
        }
        
        .section {
            margin-bottom: 40px;
        }
        
        .section h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.8em;
            border-bottom: 3px solid #ff6b6b;
            padding-bottom: 10px;
        }
        
        .api-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .api-card {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 15px;
            padding: 20px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .api-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        
        .api-card h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        
        .endpoint {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
        }
        
        .method {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
            color: white;
            font-size: 0.8em;
            margin-right: 10px;
        }
        
        .get { background: #28a745; }
        .post { background: #007bff; }
        .put { background: #ffc107; color: #333; }
        .delete { background: #dc3545; }
        .patch { background: #6f42c1; }
        
        .url {
            font-family: 'Courier New', monospace;
            background: #f1f3f4;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.9em;
        }
        
        .description {
            color: #666;
            margin-top: 5px;
            font-size: 0.9em;
        }
        
        .test-section {
            background: #e3f2fd;
            border-radius: 15px;
            padding: 30px;
            margin-top: 30px;
        }
        
        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            margin: 5px;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .response-area {
            background: #263238;
            color: #00ff00;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            font-family: 'Courier New', monospace;
            max-height: 300px;
            overflow-y: auto;
            white-space: pre-wrap;
        }
        
        .status-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 10px 20px;
            border-radius: 25px;
            color: white;
            font-weight: bold;
        }
        
        .status-online {
            background: #28a745;
        }
        
        .status-offline {
            background: #dc3545;
        }
        
        .architecture-info {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            border-radius: 15px;
            padding: 30px;
            margin-top: 30px;
        }
        
        .layer {
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            backdrop-filter: blur(10px);
        }
    </style>
</head>
<body>
    <div class="status-indicator" id="statusIndicator">
        üîÑ –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ –∑'—î–¥–Ω–∞–Ω–Ω—è...
    </div>
    
    <div class="container">
        <div class="header">
            <h1>üçï –°–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ —ó–∂—ñ</h1>
            <p>–ë–∞–≥–∞—Ç–æ—Ä—ñ–≤–Ω–µ–≤–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –∑ WebAPI —Ç–∞ Dependency Injection</p>
        </div>
        
        <!-- –ù–æ–≤–∏–π —Ä–æ–∑–¥—ñ–ª –∑ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º –Ω–∞ —Ä–µ–∞–ª—å–Ω–∏–π —Å–∞–π—Ç -->
        <div style="background: linear-gradient(135deg, #10ac84 0%, #48a3e8 100%); color: white; padding: 30px; text-align: center;">
            <h2 style="margin-bottom: 15px; font-size: 1.8em;">üåü –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç—É</h2>
            <p style="margin-bottom: 20px; font-size: 1.1em;">–ü–æ–¥–∏–≤—ñ—Ç—å—Å—è, —è–∫ –ø—Ä–∞—Ü—é—î –Ω–∞—à –ø—Ä–æ–µ–∫—Ç —É —Ä–µ–∞–ª—å–Ω–æ–º—É —Å–µ—Ä–µ–¥–æ–≤–∏—â—ñ!</p>
            <a href="/restaurant.html" target="_blank" 
               style="display: inline-block; background: rgba(255,255,255,0.2); color: white; padding: 15px 30px; 
                      border-radius: 50px; text-decoration: none; font-weight: bold; font-size: 1.1em;
                      border: 2px solid rgba(255,255,255,0.3); transition: all 0.3s ease;
                      backdrop-filter: blur(10px);"
               onmouseover="this.style.background='rgba(255,255,255,0.3)'; this.style.transform='scale(1.05)'"
               onmouseout="this.style.background='rgba(255,255,255,0.2)'; this.style.transform='scale(1)'">
                üöÄ –í—ñ–¥–∫—Ä–∏—Ç–∏ —Ä–µ–∞–ª—å–Ω–∏–π —Å–∞–π—Ç –¥–æ—Å—Ç–∞–≤–∫–∏ —ó–∂—ñ
            </a>
            <p style="margin-top: 15px; font-size: 0.9em; opacity: 0.8;">
                ‚ú® –ü–µ—Ä–µ—Ö–æ–¥—å—Ç–µ –∑–∞ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º, —â–æ–± –ø–æ–±–∞—á–∏—Ç–∏ –ø–æ–≤–Ω–æ—Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞—à–æ—ó —Å–∏—Å—Ç–µ–º–∏ –¥–æ—Å—Ç–∞–≤–∫–∏!
            </p>
        </div>
        
        <div class="content">
            <div class="section">
                <h2>üìö API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è</h2>
                
                <div class="api-grid">
                    <div class="api-card">
                        <h3>üçΩÔ∏è –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å—Ç—Ä–∞–≤–∞–º–∏</h3>
                        
                        <div class="endpoint">
                            <span class="method get">GET</span>
                            <span class="url">/api/dishes</span>
                            <div class="description">–û—Ç—Ä–∏–º–∞—Ç–∏ –≤—Å—ñ —Å—Ç—Ä–∞–≤–∏</div>
                            <button class="btn" onclick="testAPI('GET', '/api/dishes')">–¢–µ—Å—Ç—É–≤–∞—Ç–∏</button>
                        </div>
                        
                        <div class="endpoint">
                            <span class="method get">GET</span>
                            <span class="url">/api/dishes/{id}</span>
                            <div class="description">–û—Ç—Ä–∏–º–∞—Ç–∏ —Å—Ç—Ä–∞–≤—É –∑–∞ ID</div>
                            <button class="btn" onclick="testAPI('GET', '/api/dishes/1')">–¢–µ—Å—Ç—É–≤–∞—Ç–∏</button>
                        </div>
                        
                        <div class="endpoint">
                            <span class="method get">GET</span>
                            <span class="url">/api/dishes/by-type/{type}</span>
                            <div class="description">–§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è —Å—Ç—Ä–∞–≤ –∑–∞ —Ç–∏–ø–æ–º</div>
                            <button class="btn" onclick="testAPI('GET', '/api/dishes/by-type/FIRST_COURSE')">–¢–µ—Å—Ç—É–≤–∞—Ç–∏</button>
                        </div>
                        
                        <div class="endpoint">
                            <span class="method post">POST</span>
                            <span class="url">/api/dishes</span>
                            <div class="description">–°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤—É —Å—Ç—Ä–∞–≤—É</div>
                            <button class="btn" onclick="createDish()">–¢–µ—Å—Ç—É–≤–∞—Ç–∏</button>
                        </div>
                    </div>
                    
                    <div class="api-card">
                        <h3>üì¶ –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è–º–∏</h3>
                        
                        <div class="endpoint">
                            <span class="method get">GET</span>
                            <span class="url">/api/orders</span>
                            <div class="description">–û—Ç—Ä–∏–º–∞—Ç–∏ –≤—Å—ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</div>
                            <button class="btn" onclick="testAPI('GET', '/api/orders')">–¢–µ—Å—Ç—É–≤–∞—Ç–∏</button>
                        </div>
                        
                        <div class="endpoint">
                            <span class="method get">GET</span>
                            <span class="url">/api/orders/{id}</span>
                            <div class="description">–û—Ç—Ä–∏–º–∞—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –∑–∞ ID</div>
                            <button class="btn" onclick="testAPI('GET', '/api/orders/1')">–¢–µ—Å—Ç—É–≤–∞—Ç–∏</button>
                        </div>
                        
                        <div class="endpoint">
                            <span class="method post">POST</span>
                            <span class="url">/api/orders</span>
                            <div class="description">–°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤–µ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</div>
                            <button class="btn" onclick="createOrder()">–¢–µ—Å—Ç—É–≤–∞—Ç–∏</button>
                        </div>
                        
                        <div class="endpoint">
                            <span class="method post">POST</span>
                            <span class="url">/api/orders/complex-lunch</span>
                            <div class="description">–°—Ç–≤–æ—Ä–∏—Ç–∏ –∫–æ–º–ø–ª–µ–∫—Å–Ω–∏–π –æ–±—ñ–¥</div>
                            <button class="btn" onclick="createComplexLunch()">–¢–µ—Å—Ç—É–≤–∞—Ç–∏</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="test-section">
                <h2>üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è API</h2>
                <p>–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –Ω–∞ –∫–Ω–æ–ø–∫–∏ –≤–∏—â–µ –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –µ–Ω–¥–ø–æ—ñ–Ω—Ç—ñ–≤. –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –∑'—è–≤–ª—è—Ç—å—Å—è –Ω–∏–∂—á–µ:</p>
                <div class="response-area" id="responseArea">
–¢—É—Ç –∑'—è–≤–ª—è—Ç—å—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ API –≤–∏–∫–ª–∏–∫—ñ–≤...
                </div>
            </div>
            
            <div class="architecture-info">
                <h2>üèóÔ∏è –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è</h2>
                <div class="layer">
                    <strong>Presentation Layer (PL)</strong> - REST –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∏ —Ç–∞ DTO
                </div>
                <div class="layer">
                    <strong>Business Logic Layer (BLL)</strong> - –°–µ—Ä–≤—ñ—Å–∏ –∑ –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–æ—é
                </div>
                <div class="layer">
                    <strong>Data Access Layer (DAL)</strong> - –†–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó –¥–ª—è –¥–æ—Å—Ç—É–ø—É –¥–æ –¥–∞–Ω–∏—Ö
                </div>
                <div class="layer">
                    <strong>Domain Layer</strong> - –î–æ–º–µ–Ω–Ω—ñ –º–æ–¥–µ–ª—ñ —Ç–∞ –µ–Ω—É–º–∏
                </div>
            </div>
        </div>
    </div>

    <script>
        // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞–Ω—É —Å–µ—Ä–≤–µ—Ä–∞
        async function checkServerStatus() {
            try {
                const response = await fetch('/api/dishes');
                const indicator = document.getElementById('statusIndicator');
                if (response.ok) {
                    indicator.textContent = 'üü¢ –°–µ—Ä–≤–µ—Ä –æ–Ω–ª–∞–π–Ω';
                    indicator.className = 'status-indicator status-online';
                } else {
                    indicator.textContent = 'üî¥ –ü–æ–º–∏–ª–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞';
                    indicator.className = 'status-indicator status-offline';
                }
            } catch (error) {
                const indicator = document.getElementById('statusIndicator');
                indicator.textContent = 'üî¥ –°–µ—Ä–≤–µ—Ä –æ—Ñ–ª–∞–π–Ω';
                indicator.className = 'status-indicator status-offline';
            }
        }

        // –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è API
        async function testAPI(method, endpoint) {
            const responseArea = document.getElementById('responseArea');
            responseArea.textContent = `–í–∏–∫–æ–Ω—É—î—Ç—å—Å—è ${method} –∑–∞–ø–∏—Ç –¥–æ ${endpoint}...\n`;
            
            try {
                const response = await fetch(endpoint, { method: method });
                const data = await response.json();
                
                responseArea.textContent = 
                    `Status: ${response.status} ${response.statusText}\n` +
                    `URL: ${method} ${endpoint}\n` +
                    `Response:\n${JSON.stringify(data, null, 2)}`;
            } catch (error) {
                responseArea.textContent = 
                    `–ü–æ–º–∏–ª–∫–∞: ${error.message}\n` +
                    `URL: ${method} ${endpoint}`;
            }
        }

        // –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ—ó —Å—Ç—Ä–∞–≤–∏
        async function createDish() {
            const dish = {
                name: "–¢–µ—Å—Ç–æ–≤–∞ —Å—Ç—Ä–∞–≤–∞",
                description: "–°—Ç–≤–æ—Ä–µ–Ω–∞ —á–µ—Ä–µ–∑ –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å",
                price: 99.99,
                dishType: "APPETIZER"
            };
            
            const responseArea = document.getElementById('responseArea');
            responseArea.textContent = `–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ—ó —Å—Ç—Ä–∞–≤–∏...\n`;
            
            try {
                const response = await fetch('/api/dishes', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(dish)
                });
                
                const data = await response.json();
                
                responseArea.textContent = 
                    `Status: ${response.status} ${response.statusText}\n` +
                    `URL: POST /api/dishes\n` +
                    `Request Body:\n${JSON.stringify(dish, null, 2)}\n\n` +
                    `Response:\n${JSON.stringify(data, null, 2)}`;
            } catch (error) {
                responseArea.textContent = `–ü–æ–º–∏–ª–∫–∞: ${error.message}`;
            }
        }

        // –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
        async function createOrder() {
            const order = {
                customerName: "–¢–µ—Å—Ç–æ–≤–∏–π –∫–ª—ñ—î–Ω—Ç",
                customerPhone: "+380501234567",
                deliveryAddress: "–≤—É–ª. –¢–µ—Å—Ç–æ–≤–∞ 1",
                orderItems: [
                    { dishId: 1, quantity: 2 },
                    { dishId: 2, quantity: 1 }
                ],
                orderType: "CUSTOM"  // –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –≤–∞–ª—ñ–¥–Ω–∏–π —Ç–∏–ø
            };
            
            const responseArea = document.getElementById('responseArea');
            responseArea.textContent = `–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è...\n`;
            
            try {
                const response = await fetch('/api/orders', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(order)
                });
                
                const data = await response.json();
                
                responseArea.textContent = 
                    `Status: ${response.status} ${response.statusText}\n` +
                    `URL: POST /api/orders\n` +
                    `Request Body:\n${JSON.stringify(order, null, 2)}\n\n` +
                    `Response:\n${JSON.stringify(data, null, 2)}`;
            } catch (error) {
                responseArea.textContent = `–ü–æ–º–∏–ª–∫–∞: ${error.message}`;
            }
        }

        // –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–≥–æ –æ–±—ñ–¥—É
        async function createComplexLunch() {
            const complexLunch = {
                customerName: "–ö–ª—ñ—î–Ω—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–≥–æ –æ–±—ñ–¥—É",
                customerPhone: "+380509876543",
                deliveryAddress: "–≤—É–ª. –û–±—ñ–¥–Ω—è 10",
                firstCourseId: 1,    // –ë–æ—Ä—â —É–∫—Ä–∞—ó–Ω—Å–∫–∏–π
                secondCourseId: 4,   // –ö–æ—Ç–ª–µ—Ç–∞ –ø–æ-–∫–∏—ó–≤—Å—å–∫–∏
                saladId: 7,          // –û–ª—ñ–≤'—î
                drinkId: 11          // –ö–æ–º–ø–æ—Ç –∑ —Å—É—Ö–æ—Ñ—Ä—É–∫—Ç—ñ–≤
            };
            
            const responseArea = document.getElementById('responseArea');
            responseArea.textContent = `–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–≥–æ –æ–±—ñ–¥—É...\n`;
            
            try {
                const response = await fetch('/api/orders/complex-lunch', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(complexLunch)
                });
                
                const data = await response.json();
                
                responseArea.textContent = 
                    `Status: ${response.status} ${response.statusText}\n` +
                    `URL: POST /api/orders/complex-lunch\n` +
                    `Request Body:\n${JSON.stringify(complexLunch, null, 2)}\n\n` +
                    `Response:\n${JSON.stringify(data, null, 2)}`;
            } catch (error) {
                responseArea.textContent = `–ü–æ–º–∏–ª–∫–∞: ${error.message}`;
            }
        }

        // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è
        document.addEventListener('DOMContentLoaded', function() {
            checkServerStatus();
            setInterval(checkServerStatus, 30000); // –ü–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏ –∫–æ–∂–Ω—ñ 30 —Å–µ–∫—É–Ω–¥
        });
    </script>
</body>
</html>
